#!/usr/bin/env bash

DO_ERROR="true"

if [[ $# -lt 1 ]]; then
	echo "Please specify at least one argument (the file)"
	exit 1
fi

while [[ $# -gt 1 ]]; do
	case $1 in 
		"--help"|"-h")
			echo "Help is not yet implemented :)"
			exit 1
			;;
		"--no-warning"|"-n")
			DO_ERROR="false"
			;;
		*)
			echo "Unrecognized argument: $1"
			exit 1
			;;
	esac
	shift
done

FILE="$HOME/.obydots/profiles/$(cat /etc/hostname)/$1"
DEFAULT_FILE="$HOME/.obydots/profiles/default/$1"


if [[ ! -e "$FILE" ]]; then
	if [[ -e "$DEFAULT_FILE" ]]; then
		FILE="$DEFAULT_FILE"
	fi
fi

if [[ "$DO_ERROR" = "true" ]]; then
	if [[ ! -e "$FILE" ]]; then
		notify-send -u critical "ObyDots profile file not found" "Your configuration does not provide '$FILE'"
	fi
fi

echo $FILE
