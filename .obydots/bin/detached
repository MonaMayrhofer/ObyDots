#!/usr/bin/env zsh


if [[ $# -lt 1 ]]; then
	echo "Usage: $0 [COMMAND]"
	exit 1
fi

OUTFILE="/dev/null"

while [[ $# -gt 1 ]]; do
	case $1 in
		"--help"|"-h")
			echo "Help not implemented yet :)."
			;;
		"--")
			shift
			break
			;;
		"-o"|"--stdout")
			shift
			OUTFILE=$1
			;;
		*)
			break
			;;
	esac
	shift
done

COMMAND=$(which $1)
shift
ARGS=$@


if [[ $COMMAND = "" ]]; then
	echo "Ended up with invalid command: '$COMMAND'"
	exit 1
fi

echo "Running: '$COMMAND $ARGS'"
echo "Redirecting stdout to: '$OUTFILE'"
nohup $COMMAND $ARGS > ${OUTFILE} & disown
