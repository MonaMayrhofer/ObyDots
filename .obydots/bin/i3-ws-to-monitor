#!/usr/bin/env bash

source $(obydots-profile-file monitor-interface.sh)

if [[ $# -lt 1 ]]; then
	echo "Usage $0 [OPTIONS] MONITOR_NUMBER"
	exit 1
fi

while [[ $# -gt 1 ]]; do
	case $1 in 
		"--help"|"-h") 
			echo "Help not yet implemented :)"
			;;
		"*")
			echo "Unknown argument $1"
			exit 1
			;;
	esac
	shift
done

TARGET_OUTPUT_NUMBER=$1

# Resolve output
VAR_NAME="MONITOR_$TARGET_OUTPUT_NUMBER"
OUTPUT=${!VAR_NAME}

echo $VAR_NAME
echo $OUTPUT

if [[ "$OUTPUT" = "" ]]; then
	dunstify -a "ObyDots i3" -u CRITICAL "No monitor mapped to '$TARGET_OUTPUT_NUMBER'"
	exit 1
fi

i3-msg "move workspace to output ${OUTPUT}"
